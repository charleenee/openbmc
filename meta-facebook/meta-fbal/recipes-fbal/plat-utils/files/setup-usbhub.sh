#!/bin/sh

# check usb hub i2c register
Result=$(i2cget -f -y 4 0x2C 0xFF i 2>&1 1>/dev/null)

# reset usb hub if usb hub i2c register was not available
if [ -n "$Result" ]; then
    echo "Reset USB Hub"
    i2cset -f -y 4 0x76 0x07 0xf7
    i2cset -f -y 4 0x76 0x03 0xf7
    sleep 1
    i2cset -f -y 4 0x76 0x07 0xff
fi

echo "Config USB Hub"
i2cset -f -y 4 0x2c 0x00 0x24 0x04 0x14 0x25 0x00 0x02 0xBB 0x20 0x02 0x00 0x00 0x00 0x01 0x32 0x01 0x32 0x32 s
i2cset -f -y 4 0x2c 0xff 0x01 s
